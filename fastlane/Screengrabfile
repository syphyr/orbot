EMULATOR_ABI_ARM64 = "arm64-v8a"
EMULATOR_ABI_INTEL64 = "x86_64"

# change this to intel if not running fastlane on an arm machine
EMULATOR_ABI = EMULATOR_ABI_ARM64


# For more information about all available options run:
# fastlane action screngrab

# this is a ruby scirpt, remove the leading '#' to uncomment lines

# package for Orbot APK (not the test APK)
app_package_name('org.torproject.android.debug')


# an APK produced by ./gradlew assembleFullpermDebug that can run on your emulator's ABI
# don't commit because the git tag in APK filename and emulator ABI vary from person2person, build2build
# but for convenience, you can set this to the file you select in fastlane screengrab prompt...

# how app filename for debug fullperm app is built in app/build.gradle.kts
# since this changes between builds, we have to build the filename here...
APP_APK_PATH= 'app/build/outputs/apk/fullperm/debug/'
gitCmd = 'git describe --tags --always'
gitCmdResult = `#{gitCmd}`
APP_APK_FILENAME= 'Orbot-' + gitCmdResult + '-fullperm-' + EMULATOR_ABI + '-debug.apk'

# if fastlane can't find the app APK, just comment this line out and let it try to help you find one...
app_apk_path(APP_APK_PATH + APP_APK_FILENAME)

# shouldn't change, APK generated by ./gradlew assembleFullPermdebugAndroidTest
tests_apk_path('app/build/outputs/apk/androidTest/fullperm/debug/app-fullperm-debug-androidTest.apk')


ALL_LOCALES_WE_TRACK = ['en-US', 'fr-FR', 'es-MX', 'de-DE', 'fa', 'ar', 'he', 'tr', 'pt', 'ja', 'hi', 'ru', 'ko']

LOCALES_TO_TEST = ALL_LOCALES_WE_TRACK 

# assign LOCALES_TO_TEST to (re-)run screenshots for those langs. if adding/redoing a specific language
# you can just capture its screenshots, but add it to LOCALES_WE_TRACK afterwards if it's not already there
# LOCALES_TO_TEST = ['fa']

locales(LOCALES_TO_TEST)





# if false, A-orbot_connected_1754320391454.png becomes A-orbot_connected.png... easier to embed in HTML site
use_timestamp_suffix(false) 


# clear all previously generated screenshots in your local output directory before creating new ones
# if you're running multiple rounds of fastlane screengrab, and especially if use_timestamp_suffix is false
# then you probably want this to be false
clear_previous_screenshots(false)

reinstall_app(true) # clears app data and settings if there are any, probably what you desire...

skip_open_summary(true) 

device_type('phone') # one: of phone, sevenInch, tenInch, tv, wear

# default behavior is to exit once a test fails. If you exit on failure, none of the successful 
# screenshots captured before the failure will be copied and saved...
exit_on_test_failure(true) 


# packname name of test class, plus all the class names start with "Screenshot"
PREFIX = 'org.torproject.android.Screenshot'

# full class names, helper variables for use_tests_in_classes below...
CHOOSE_APPS = PREFIX + 'ChooseApps'
CHOOSE_HOW_TO_CONNECT = PREFIX + 'ChooseHowToConnect'
CONNECTED_SCREEN = PREFIX + 'Connected'
KINDNESS_SCREEN = PREFIX + 'KindnessModeFragment'
MORE_SCREEN = PREFIX + 'MoreFragment'
SETTINGS = PREFIX + 'Settings'


# uncomment ONE of these to only run certain test(s), otherwise Screengrab will run every test defiend
# in the package org.torproject.android, even if there's no variable defined for it above... 
# Keep these all commented out during commits...
	
# choose apps makes a toast, that sometimes sneaks its way into other screenshots, run it in isolation
# use_tests_in_classes([CHOOSE_APPS])
# use_tests_in_classes([CHOOSE_HOW_TO_CONNECT, CONNECTED_SCREEN, KINDNESS_SCREEN, MORE_SCREEN, SETTINGS])	

